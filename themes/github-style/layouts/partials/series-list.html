{{ define "series-list" }}
<div>
    <div class="position-relative">
        <div>
            <!-- Page Header -->
            <div class="text-center mb-6">
                <h1 class="f1-light mb-2">ğŸ“š ì‹œë¦¬ì¦ˆ</h1>
                <p class="f4 text-gray">ì£¼ì œë³„ë¡œ ì •ë¦¬ëœ í¬ìŠ¤íŠ¸ ì‹œë¦¬ì¦ˆë¥¼ ë§Œë‚˜ë³´ì„¸ìš”</p>
            </div>

            <!-- Series Books Grid -->
            <div class="series-books-container">
                {{ $allSeries := slice }}
                {{ range .Site.RegularPages }}
                {{ range .Params.series }}
                {{ $allSeries = $allSeries | append . }}
                {{ end }}
                {{ end }}
                {{ $uniqueSeries := $allSeries | uniq }}

                {{ if gt (len $uniqueSeries) 0 }}
                <div class="series-books-grid" id="series-grid">
                    {{ range $uniqueSeries }}
                    {{ $seriesName := . }}
                    {{ $seriesPosts := where $.Site.RegularPages "Params.series" "intersect" (slice $seriesName) }}
                    {{ $seriesPosts = $seriesPosts.ByDate.Reverse }}

                    <div class="series-book" data-series="{{ urlize $seriesName }}" data-series-name="{{ $seriesName }}"
                        data-post-count="{{ len $seriesPosts }}">
                        <div class="book-title">{{ $seriesName }}</div>
                        <div class="book-count">{{ len $seriesPosts }}í¸</div>
                        {{ if $seriesPosts }}
                        <div class="book-cover-date">{{ (index $seriesPosts 0).Date.Format "2006.01" }}</div>
                        {{ end }}

                        <!-- í¬ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ìˆ¨ê²¨ì§„ ìš”ì†Œë¡œ ì €ì¥ -->
                        <div class="series-posts-data" style="display: none;">
                            {{ range $index, $post := $seriesPosts }}
                            <div class="post-data" data-index="{{ add $index 1 }}" data-title="{{ $post.Title }}"
                                data-permalink="{{ $post.Permalink }}" data-date="{{ $post.Date.Format "2006ë…„ 1ì›” 2ì¼" }}">
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}

                    <!-- ë³„ë„ì˜ í¬ìŠ¤íŠ¸ ëª©ë¡ ì˜ì—­ -->
                    <div class="series-posts-container" id="posts-container">
                        <div class="series-posts-header">
                            <div class="series-title-section">
                                <h2 class="series-posts-title" id="posts-title">ì‹œë¦¬ì¦ˆ ì œëª©</h2>
                                <p class="series-posts-meta" id="posts-meta">0ê°œ í¬ìŠ¤íŠ¸</p>
                            </div>
                            <div class="series-navigation-controls">
                                <button id="prev-post-btn" onclick="navigatePrevPost()" class="series-nav-btn" disabled>
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                                    </svg>
                                    ì´ì „
                                </button>
                                <span id="post-navigation-info" class="nav-info">1 / 1</span>
                                <button id="next-post-btn" onclick="navigateNextPost()" class="series-nav-btn" disabled>
                                    ë‹¤ìŒ
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <ul class="series-post-list" id="posts-list">
                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                        </ul>
                        <div class="series-view-all-large" id="view-all-container" style="display: none;">
                            <a href="#" id="view-all-link">ì „ì²´ ì‹œë¦¬ì¦ˆ ë³´ê¸° â†’</a>
                        </div>
                    </div>
                </div>
                {{ else }}
                <div class="col-12 text-center py-6">
                    <h3 class="f4 text-normal">ì•„ì§ ì‹œë¦¬ì¦ˆê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                    <p class="text-gray">í¬ìŠ¤íŠ¸ì— series íƒœê·¸ë¥¼ ì¶”ê°€í•˜ì—¬ ì‹œë¦¬ì¦ˆë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.</p>
                </div>
                {{ end }}
            </div>
        </div>
    </div>
</div>
<script src="{{ "/js/series-interaction.js" | relURL }}"></script>
{{ end }}
